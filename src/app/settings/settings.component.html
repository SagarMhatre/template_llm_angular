<mat-card class="settings-card">
  <mat-card-header>
    <mat-card-title>Settings</mat-card-title>
    <mat-card-subtitle>Configure your OpenAI access.</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <mat-form-field appearance="outline" class="field">
      <mat-label>OpenAI API Key</mat-label>
      <input
        matInput
        type="password"
        placeholder="sk-..."
        autocomplete="off"
        [value]="apiKey"
        [disabled]="loading"
        (input)="handleApiKeyInput($event)"
      />
      <mat-hint align="end">Stored only in this session.</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="outline" class="field">
      <mat-label>Model</mat-label>
      <mat-select
        [value]="selectedModel"
        [disabled]="loading"
        (selectionChange)="modelChange.emit($event.value)"
      >
        <mat-option *ngFor="let model of availableModels" [value]="model.value">
          {{ model.label }} ({{ model.value }})
        </mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card-content>

  <mat-card-actions align="end">
    <button mat-button (click)="close.emit()" [disabled]="loading">Close</button>
  </mat-card-actions>
</mat-card>
